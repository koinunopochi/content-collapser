# 見出し折りたたみ君 (DocBase) v1.0

DocBase の投稿ページで、H2〜H6の見出しをクリックすると、そのセクションのコンテンツを折りたたんだり展開したりできる **Chrome拡張機能** です。

長いドキュメントを読む際に、不要なセクションを一時的に隠して可読性を向上させることを目的としています。開閉状態はブラウザにページごとに記憶され、次回訪問時も状態が復元されます。

## 特徴

* **見出しクリックで折りたたみ:** H2, H3, H4, H5, H6 見出しをクリックして内容をトグル表示。
* **状態の永続化:** 開閉状態をページごとにブラウザに記憶 (localStorageまたはChrome Storageを使用)。
* **動的コンテンツ対応:** ページが後から読み込まれた場合でも対応。
* **Chrome拡張機能:** ブラウザに簡単に追加して利用可能。

## 使い方 (Chrome拡張機能として読み込む)

この拡張機能は現在パッケージ化されていないため、以下の手順でChromeに手動で読み込む必要があります。

1.  **リポジトリをダウンロード:**
    * このGitHubリポジトリのページで、「Code」ボタンをクリックし、「Download ZIP」を選択してリポジトリ全体をダウンロードします。
    * ダウンロードしたZIPファイルを解凍（展開）します。フォルダの中に `manifest.json` や `script.js` が含まれていることを確認してください。
    * (または、Gitが使える方は `git clone <リポジトリのURL>` でクローンしてもOKです)

2.  **Chrome拡張機能ページを開く:**
    * Chromeブラウザを起動し、アドレスバーに `chrome://extensions` と入力してEnterキーを押します。

3.  **デベロッパーモードを有効にする:**
    * 拡張機能ページの右上にある「**デベロッパーモード**」のスイッチをオン（有効）にします。

4.  **拡張機能を読み込む:**
    * デベロッパーモードを有効にすると左上に表示される「**パッケージ化されていない拡張機能を読み込む**」ボタンをクリックします。

5.  **フォルダを選択:**
    * ファイル選択ダイアログが開きます。手順1で **解凍（展開）したフォルダ** ( `manifest.json` ファイルが含まれているフォルダ全体) を選択し、「選択」ボタン（または「開く」ボタン）をクリックします。

6.  **インストール完了:**
    * 「見出し折りたたみ君 (DocBase)」というカードが拡張機能の一覧に追加されればインストール成功です。エラーが表示された場合は、フォルダの選択が間違っていないか、`manifest.json` の内容に問題がないか確認してください。

7.  **DocBaseで確認:**
    * DocBaseの投稿ページを開くか、すでに開いている場合はページをリロードしてください。拡張機能が有効になっていれば、H2〜H6の見出しにマウスカーソルを合わせるとポインターが変わり、クリックで折りたたみ操作ができるようになります。

## 対象サービス

* 現状、**DocBase** (`https://*.docbase.com/posts/*` の形式のURL) での動作を想定して作られています (`manifest.json` ファイルで指定)。
* もし他のWebサイト（別のWikiサービスやブログなど）で使いたい場合は、`manifest.json` 内の `matches` のURLパターンを変更し、さらに `script.js` 内のコンテンツエリアを指定するセレクタ (`CONTENT_AREA_SELECTOR`) をそのサイトに合わせて修正する必要があります。

## 貢献について

* バグを見つけたり、改善のアイデアがある場合は、お気軽に **Issue** を立ててください。
* 機能追加や修正など、コードを提供いただける場合は **Pull Request** を送っていただけると大変嬉しいです！ DocBase以外のサイトへの対応なども歓迎します。

## 注意点

* DocBase側のHTML構造やクラス名が変更された場合、この拡張機能が正しく動作しなくなる可能性があります。
* 記事の編集によって見出しの順序やレベルが大幅に変更された場合、保存されていた開閉状態が意図通りに復元されないことがあります。

## ライセンス

[LICENSE](LICENSE)
